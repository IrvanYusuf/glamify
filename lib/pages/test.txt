// ignore_for_file: prefer_const_constructors

import 'package:flutter/material.dart';
import 'package:badges/badges.dart' as badges;
import '../components/custom_card.dart';

class Home extends StatefulWidget {
  const Home({super.key});

  @override
  State<Home> createState() => _HomeState();
}

class _HomeState extends State<Home> {
  final TextEditingController _search = TextEditingController();
  String searchValue = '';

  List dataCategories = ["All", "Clothes", "Electronics", "Furniture"];

  String selectedCategory = "All";
  @override
  Widget build(BuildContext context) {
    return Container(
      decoration: const BoxDecoration(color: Colors.white),
      child: SafeArea(
        child: ListView(
          children: <Widget>[
            _appbar(),
            const SizedBox(
              height: 24,
            ),
            _searchBar(),
            const SizedBox(
              height: 40,
            ),
            _categories(),
            GridView.count(
              shrinkWrap: true,
              primary: false,
              padding: const EdgeInsets.all(20),
              crossAxisSpacing: 20,
              mainAxisSpacing: 10,
              crossAxisCount: 2,
              children: List.generate(
                20,
                (index) {
                  return CustomCard(
                    image: "assets/image/shoes.png",
                    productName: "Sepatu Nike",
                    productPrice: 150000,
                  );
                },
              ),
            ),
          ],
        ),
      ),
    );
  }

  Widget _appbar() {
    return Positioned(
      top: 0,
      child: Padding(
        padding: const EdgeInsets.all(20),
        child: Row(
          mainAxisAlignment: MainAxisAlignment.spaceBetween,
          children: [
            const Text(
              "Glamify",
              style: TextStyle(
                  fontSize: 30,
                  color: Color(0xff333A73),
                  fontWeight: FontWeight.bold,
                  fontFamily: "Segoe"),
            ),
            Row(
              children: [
                IconButton(
                  splashRadius: 20,
                  onPressed: () {},
                  icon: Image.asset(
                    "assets/icon/bell-icon.png",
                    width: 30,
                  ),
                ),
                SizedBox(
                  width: 16,
                ),
                badges.Badge(
                  position: badges.BadgePosition.topEnd(top: 0, end: 0),
                  badgeContent: Text(
                    "3",
                    style: TextStyle(color: Colors.white),
                  ),
                  child: IconButton(
                    splashRadius: 20,
                    onPressed: () {},
                    icon: Image.asset(
                      "assets/icon/cart-icon.png",
                      width: 30,
                    ),
                  ),
                ),
                SizedBox(
                  width: 16,
                ),
                Container(
                  width: 40,
                  height: 40,
                  decoration: BoxDecoration(
                    borderRadius: BorderRadius.circular(50),
                    image: DecorationImage(
                      image: AssetImage("assets/image/user.png"),
                    ),
                  ),
                )
              ],
            )
          ],
        ),
      ),
    );
  }

  Widget _searchBar() {
    return Padding(
      padding: EdgeInsets.symmetric(horizontal: 20.0),
      child: Row(
        children: [
          Expanded(
            child: TextField(
              controller: _search,
              decoration: const InputDecoration(
                  contentPadding: EdgeInsets.all(10),
                  filled: true,
                  border: OutlineInputBorder(
                    borderSide: BorderSide.none,
                    borderRadius: BorderRadius.all(
                      Radius.circular(8),
                    ),
                  ),
                  fillColor: Color(0xfff2f2f2),
                  hintText: "Search...."),
            ),
          ),
          const SizedBox(
            width: 16,
          ),
          Container(
            width: 50,
            height: 50,
            child: Image.asset(
              "assets/icon/search.png",
              width: 30,
            ),
            decoration: BoxDecoration(
              color: Color(0xfff2f2f2),
              borderRadius: BorderRadius.circular(8),
            ),
          ),
        ],
      ),
    );
  }

  Widget _categories() {
    return Padding(
      padding: EdgeInsets.symmetric(horizontal: 20),
      child: Column(
        crossAxisAlignment: CrossAxisAlignment.start,
        children: [
          Text(
            "Categories",
            style: TextStyle(
                fontWeight: FontWeight.bold, fontSize: 20, fontFamily: "Segoe"),
          ),
          SizedBox(
            height: 16,
          ),
          SingleChildScrollView(
            scrollDirection: Axis.horizontal,
            child: Row(
              children: dataCategories.map((item) {
                return GestureDetector(
                  onTap: () {
                    setState(() {
                      selectedCategory = item;
                    });
                  },
                  child: Container(
                    padding: EdgeInsets.all(14),
                    decoration: BoxDecoration(
                      color: Color(
                          item == selectedCategory ? 0xff333A73 : 0xffE3E3E3),
                      borderRadius: BorderRadius.circular(10),
                    ),
                    margin: EdgeInsets.symmetric(
                        horizontal: 5), // Atur margin sesuai kebutuhan
                    child: Text(
                      item,
                      style: TextStyle(
                        color: item == selectedCategory
                            ? Colors.white
                            : Color(0xff323031),
                      ),
                    ),
                  ),
                );
              }).toList(),
            ),
          )
        ],
      ),
    );
  }
}
